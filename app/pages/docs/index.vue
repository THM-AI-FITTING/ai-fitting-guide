<template>
  <div class="docs-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-sticky">
        <h3 class="sidebar-title">API Reference</h3>
        <nav class="sidebar-nav">
          <a href="#upload" :class="{ active: activeSection === 'upload' }" @click.prevent="scrollTo('upload')">
            <span class="method post">POST</span> /upload
          </a>
          <a href="#result" :class="{ active: activeSection === 'result' }" @click.prevent="scrollTo('result')">
            <span class="method get">GET</span> /result
          </a>
          <a href="#history" :class="{ active: activeSection === 'history' }" @click.prevent="scrollTo('history')">
            <span class="method get">GET</span> /history
          </a>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="docs-content">
      <!-- Security Notice -->
      <div class="security-notice glass">
        <div class="notice-icon">âš ï¸</div>
        <div class="notice-text">
          <p><strong>ë³´ì•ˆ ì•Œë¦¼:</strong> ì €í¬ ê°€ìƒ í”¼íŒ… APIëŠ” ë³´ì•ˆì„ ìœ„í•´ íŒŒíŠ¸ë„ˆì‚¬ ì„œë²„(Backend)ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
          <p>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œ ì‹œ API Key íƒˆì·¨ ë° ë°ì´í„° ë³€ì¡°ì˜ ìœ„í—˜ì´ ìˆìœ¼ë©°, ì´ë¡œ ì¸í•œ ë¶€ì • ì‚¬ìš©ëŸ‰ì— ëŒ€í•´ì„œëŠ” ì±…ì„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
      </div>

      <!-- Upload Section -->
      <section id="upload" class="doc-section">
        <div class="header-group">
          <h2 class="gradient-text">POST /upload</h2>
          <p>ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì—¬ ìƒˆë¡œìš´ AI í”¼íŒ… ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="doc-block glass">
          <h3>ì„¤ëª…</h3>
          <p>ì¸ë¬¼ ì´ë¯¸ì§€ì™€ ì˜ë¥˜ ì´ë¯¸ì§€ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ê³ ìœ í•œ <code>requestId</code>ë¥¼ ìƒì„±í•˜ê³  ë¹„ë™ê¸° í”¼íŒ… í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì´ë¯¸ì§€ëŠ” ìë™ìœ¼ë¡œ ì „ì²˜ë¦¬ë˜ì–´ S3ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤.</p>
        </div>

        <div class="doc-block">
          <h3>ìš”ì²­ í—¤ë”</h3>
          <table class="glass">
            <thead>
              <tr><th>í‚¤</th><th>í•„ìˆ˜ ì—¬ë¶€</th><th>ì„¤ëª…</th></tr>
            </thead>
            <tbody>
              <tr><td>x-api-key</td><td>ì˜ˆ</td><td>ì¸ì¦ì„ ìœ„í•œ íŒŒíŠ¸ë„ˆ API í‚¤ì…ë‹ˆë‹¤.</td></tr>
              <tr><td>Content-Type</td><td>ì˜ˆ</td><td><code>multipart/form-data</code>ì—¬ì•¼ í•©ë‹ˆë‹¤.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="doc-block">
          <h3>Form Data íŒŒë¼ë¯¸í„°</h3>
          <table class="glass">
            <thead>
              <tr><th>íŒŒë¼ë¯¸í„°</th><th>íƒ€ì…</th><th>í•„ìˆ˜ ì—¬ë¶€</th><th>ì„¤ëª…</th></tr>
            </thead>
            <tbody>
              <tr><td>person</td><td>File</td><td>ì˜ˆ</td><td>ì¸ë¬¼ ì‚¬ì§„ (ìƒë°˜ì‹  ë˜ëŠ” ì „ì‹ ).</td></tr>
              <tr><td>product</td><td>File</td><td>ì˜ˆ</td><td>ì˜ë¥˜/ìƒí’ˆ ì´ë¯¸ì§€.</td></tr>
              <tr><td>userId</td><td>String</td><td>ì•„ë‹ˆì˜¤</td><td>ì´ë ¥ ì¶”ì ì„ ìœ„í•œ ìµœì¢… ì‚¬ìš©ì ì‹ë³„ì.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="doc-block">
          <h3>ìš”ì²­ ì˜ˆì‹œ</h3>
          <div class="code-wrapper glass" :class="{ 'collapsed': !expandedBlocks.upload }">
            <div class="code-header" @click="toggleBlock('upload')">
              <div class="lang-tabs" @click.stop>
                <button :class="{ active: selectedLangs.upload === 'js' }" @click="selectedLangs.upload = 'js'">JavaScript</button>
                <button :class="{ active: selectedLangs.upload === 'java' }" @click="selectedLangs.upload = 'java'">Java</button>
              </div>
              <div class="code-actions">
                <button class="copy-btn" @click.stop="copyCode(selectedLangs.upload === 'js' ? 'upload-code-js' : 'upload-code-java')">Copy</button>
                <div class="toggle-icon">{{ expandedBlocks.upload ? 'â–²' : 'â–¼' }}</div>
              </div>
            </div>
            
            <pre v-if="selectedLangs.upload === 'js'" id="upload-code-js"><code class="language-javascript">const formData = new FormData();
formData.append('person', personFileInput.files[0]);
formData.append('product', productFileInput.files[0]);
formData.append('userId', 'user_123');

const response = await fetch('https://api.yourservice.com/fitting/upload', {
  method: 'POST',
  headers: { 'x-api-key': 'YOUR_API_KEY' },
  body: formData
});

const data = await response.json();
console.log(data);</code></pre>

            <pre v-if="selectedLangs.upload === 'java'" id="upload-code-java"><code class="language-java">// Using Java 11+ HttpClient
import java.net.http.*;
import java.nio.file.Path;

var client = HttpClient.newHttpClient();
var multipartBody = MultipartBodyPublisher.newBuilder()
    .addPart("person", Path.of("person.jpg"))
    .addPart("product", Path.of("product.jpg"))
    .addPart("userId", "user_123")
    .build();

var request = HttpRequest.newBuilder()
    .uri(URI.create("https://api.yourservice.com/fitting/upload"))
    .header("x-api-key", "YOUR_API_KEY")
    .header("Content-Type", "multipart/form-data; boundary=" + multipartBody.getBoundary())
    .POST(multipartBody.asPublisher())
    .build();

var response = client.send(request, HttpResponse.BodyHandlers.ofString());
System.out.println(response.body());</code></pre>
          </div>
        </div>

        <div class="doc-block">
          <h3>ì‘ë‹µ ì˜ˆì‹œ</h3>
          <pre class="glass"><code>{
  "requestId": "req_20260201_abcdefg",
  "status": "PROCESSING",
  "message": "ì ‘ìˆ˜ ì™„ë£Œ"
}</code></pre>
        </div>
      </section>

      <div class="divider"></div>

      <!-- Result Section -->
      <section id="result" class="doc-section">
        <div class="header-group">
          <h2 class="gradient-text">GET /result</h2>
          <p>AI í”¼íŒ… ì‘ì—…ì˜ ìƒíƒœì™€ ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.</p>
        </div>

        <div class="doc-block glass">
          <h3>ì„¤ëª…</h3>
          <p>ì—…ë¡œë“œ APIì—ì„œ ë°›ì€ <code>requestId</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í´ë§í•©ë‹ˆë‹¤. ì‘ì—…ì˜ í˜„ì¬ ìƒíƒœì™€ ì™„ë£Œ ì‹œ ìµœì¢… ê²°ê³¼ URLì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="doc-block">
          <h3>ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</h3>
          <table class="glass">
            <thead>
              <tr><th>íŒŒë¼ë¯¸í„°</th><th>íƒ€ì…</th><th>í•„ìˆ˜ ì—¬ë¶€</th><th>ì„¤ëª…</th></tr>
            </thead>
            <tbody>
              <tr><td>requestId</td><td>String</td><td>ì˜ˆ</td><td>ì—…ë¡œë“œ ìš”ì²­ì—ì„œ ë°˜í™˜ëœ ID.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="doc-block">
          <h3>Polling ì˜ˆì‹œ</h3>
          <div class="code-wrapper glass" :class="{ 'collapsed': !expandedBlocks.polling }">
            <div class="code-header" @click="toggleBlock('polling')">
              <div class="lang-tabs" @click.stop>
                <button :class="{ active: selectedLangs.polling === 'js' }" @click="selectedLangs.polling = 'js'">JavaScript</button>
                <button :class="{ active: selectedLangs.polling === 'java' }" @click="selectedLangs.polling = 'java'">Java</button>
              </div>
              <div class="code-actions">
                <button class="copy-btn" @click.stop="copyCode(selectedLangs.polling === 'js' ? 'polling-code-js' : 'polling-code-java')">Copy</button>
                <div class="toggle-icon">{{ expandedBlocks.polling ? 'â–²' : 'â–¼' }}</div>
              </div>
            </div>

            <pre v-if="selectedLangs.polling === 'js'" id="polling-code-js"><code class="language-javascript">const pollResult = async (requestId) => {
  const checkStatus = async () => {
    const res = await fetch(`https://api.yourservice.com/result?requestId=${requestId}`, {
      headers: { 'x-api-key': 'YOUR_API_KEY' }
    });
    const data = await res.json();
    
    if (data.status === 'DONE') {
      console.log('Result:', data.resultUrl);
    } else {
      setTimeout(checkStatus, 3000);
    }
  };
  checkStatus();
};</code></pre>

            <pre v-if="selectedLangs.polling === 'java'" id="polling-code-java"><code class="language-java">// Using Java 11+ HttpClient
public void pollResult(String requestId) throws Exception {
    var client = HttpClient.newHttpClient();
    var uri = URI.create("https://api.yourservice.com/result?requestId=" + requestId);
    
    while (true) {
        var request = HttpRequest.newBuilder()
            .uri(uri)
            .header("x-api-key", "YOUR_API_KEY")
            .GET()
            .build();
            
        var response = client.send(request, HttpResponse.BodyHandlers.ofString());
        // Parse JSON response (e.g., using Jackson or Gson)
        if (response.body().contains("\"DONE\"")) {
            System.out.println("Processing complete");
            break;
        }
        Thread.sleep(3000);
    }
}</code></pre>
          </div>
        </div>

        <div class="doc-block">
          <h3>ì‘ë‹µ ì˜ˆì‹œ (ì™„ë£Œ)</h3>
          <pre class="glass"><code>{
  "requestId": "req_1",
  "userId": "user_123",
  "status": "DONE",
  "resultUrl": "...",
  "createdAt": "2026-02-01T07:15:20Z",
  "message": "ì²˜ë¦¬ ì™„ë£Œ"
}</code></pre>
        </div>

        <div class="doc-block">
          <h3>ì‘ë‹µ ì˜ˆì‹œ (ì§„í–‰ ì¤‘)</h3>
          <pre class="glass"><code>{
  "requestId": "req_2026...",
  "status": "PROCESSING",
  "message": "ì‘ì—… ì¤‘"
}</code></pre>
        </div>
      </section>

      <div class="divider"></div>

      <!-- History Section -->
      <section id="history" class="doc-section">
        <div class="header-group">
          <h2 class="gradient-text">GET /history</h2>
          <p>íŠ¹ì • ì†Œìœ ì ë˜ëŠ” ì‚¬ìš©ìì˜ ì´ì „ AI í”¼íŒ… ìš”ì²­ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.</p>
        </div>

        <div class="doc-block glass">
          <h3>ì„¤ëª…</h3>
          <p>í”¼íŒ… ì‘ì—…ì˜ í˜ì´ì§€ë„¤ì´ì…˜ëœ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. <code>userId</code> í•„í„°ë§ì„ ì§€ì›í•˜ì—¬ íŠ¹ì • ì‚¬ìš©ìì˜ ì´ë ¥ë§Œ í‘œì‹œí•˜ê±°ë‚˜, í•„í„°ê°€ ì—†ëŠ” ê²½ìš° í•´ë‹¹ íŒŒíŠ¸ë„ˆì˜ ëª¨ë“  ì‘ì—…ì„ í‘œì‹œí•©ë‹ˆë‹¤.</p>
          <div class="info-alert glass">
            <span class="info-icon">ğŸ’¡</span>
            <p><strong>í† í° ê¸°ë°˜ í˜ì´ì§•:</strong> ë³¸ APIëŠ” DynamoDBì˜ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì˜¤í”„ì…‹ ë°©ì‹ì´ ì•„ë‹Œ <strong>í† í° ê¸°ë°˜ í˜ì´ì§•</strong>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‘ë‹µì˜ <code>nextId</code>ì™€ <code>nextSort</code>ë¥¼ ë‹¤ìŒ ìš”ì²­ì˜ <code>lastId</code>ì™€ <code>lastSort</code> íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        </div>

        <div class="doc-block">
          <h3>ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</h3>
          <table class="glass">
            <thead>
              <tr><th>íŒŒë¼ë¯¸í„°</th><th>íƒ€ì…</th><th>í•„ìˆ˜ ì—¬ë¶€</th><th>ì„¤ëª…</th></tr>
            </thead>
            <tbody>
              <tr><td>userId</td><td>String</td><td>ì•„ë‹ˆì˜¤</td><td>íŠ¹ì • ì‚¬ìš©ìì˜ ì‘ì—…ì„ í•„í„°ë§í•©ë‹ˆë‹¤.</td></tr>
              <tr><td>size</td><td>Number</td><td>ì•„ë‹ˆì˜¤</td><td>í•œ í˜ì´ì§€ì— ê°€ì ¸ì˜¬ í•­ëª© ìˆ˜ (ê¸°ë³¸ê°’: 10).</td></tr>
              <tr><td>sort</td><td>String</td><td>ì•„ë‹ˆì˜¤</td><td>ì •ë ¬ ìˆœì„œ (<code>desc</code> ë˜ëŠ” <code>asc</code>, ê¸°ë³¸ê°’: <code>desc</code>).</td></tr>
              <tr><td>lastId</td><td>String</td><td>ì•„ë‹ˆì˜¤</td><td>ì´ì „ ì‘ë‹µì˜ <code>nextId</code> ê°’ì„ ì „ë‹¬í•©ë‹ˆë‹¤.</td></tr>
              <tr><td>lastSort</td><td>String</td><td>ì•„ë‹ˆì˜¤</td><td>ì´ì „ ì‘ë‹µì˜ <code>nextSort</code> ê°’ì„ ì „ë‹¬í•©ë‹ˆë‹¤.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="doc-block">
          <h3>ì‘ë‹µ êµ¬ì¡°</h3>
          <table class="glass">
            <thead>
              <tr><th>í•„ë“œ</th><th>íƒ€ì…</th><th>ì„¤ëª…</th></tr>
            </thead>
            <tbody>
              <tr><td>items</td><td>Array</td><td>ì‘ì—… ì´ë ¥ ëª©ë¡.</td></tr>
              <tr><td>nextId</td><td>String</td><td>ë‹¤ìŒ í˜ì´ì§€ ì¡°íšŒë¥¼ ìœ„í•œ ID í† í° (ë§ˆì§€ë§‰ í˜ì´ì§€ì¸ ê²½ìš° null).</td></tr>
              <tr><td>nextSort</td><td>String</td><td>ë‹¤ìŒ í˜ì´ì§€ ì¡°íšŒë¥¼ ìœ„í•œ ì •ë ¬ í† í° (ë§ˆì§€ë§‰ í˜ì´ì§€ì¸ ê²½ìš° null).</td></tr>
            </tbody>
          </table>
        </div>

        <div class="doc-block">
          <h3>í˜ì´ì§• ìš”ì²­ ì˜ˆì‹œ</h3>
          <div class="code-wrapper glass" :class="{ 'collapsed': !expandedBlocks.history }">
            <div class="code-header" @click="toggleBlock('history')">
              <div class="lang-tabs" @click.stop>
                <button :class="{ active: selectedLangs.history === 'js' }" @click="selectedLangs.history = 'js'">JavaScript</button>
                <button :class="{ active: selectedLangs.history === 'java' }" @click="selectedLangs.history = 'java'">Java</button>
              </div>
              <div class="code-actions">
                <button class="copy-btn" @click.stop="copyCode(selectedLangs.history === 'js' ? 'history-code-js' : 'history-code-java')">Copy</button>
                <div class="toggle-icon">{{ expandedBlocks.history ? 'â–²' : 'â–¼' }}</div>
              </div>
            </div>

            <pre v-if="selectedLangs.history === 'js'" id="history-code-js"><code class="language-javascript">// ë‹¤ìŒ í˜ì´ì§€ ì¡°íšŒë¥¼ ìœ„í•œ í•¨ìˆ˜ ì˜ˆì‹œ
const fetchNextPage = async (userId, lastId = null, lastSort = null) => {
  let url = `https://api.yourservice.com/fitting/history?userId=${userId}&size=10`;
  
  if (lastId && lastSort) {
    url += `&lastId=${lastId}&lastSort=${lastSort}`;
  }

  const response = await fetch(url, {
    headers: { 'x-api-key': 'YOUR_API_KEY' }
  });
  
  const data = await response.json();
  console.log('Items:', data.items);
  
  if (data.nextId) {
    console.log('Next page available');
    // data.nextId, data.nextSortë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ í˜¸ì¶œ ê°€ëŠ¥
  }
};</code></pre>

            <pre v-if="selectedLangs.history === 'java'" id="history-code-java"><code class="language-java">// Using Java 11+ HttpClient
public void fetchHistory(String userId, String lastId, String lastSort) throws Exception {
    var client = HttpClient.newHttpClient();
    String url = "https://api.yourservice.com/fitting/history?userId=" + userId + "&size=10";
    
    if (lastId != null && lastSort != null) {
        url += "&lastId=" + lastId + "&lastSort=" + lastSort;
    }

    var request = HttpRequest.newBuilder()
        .uri(URI.create(url))
        .header("x-api-key", "YOUR_API_KEY")
        .GET()
        .build();
        
    var response = client.send(request, HttpResponse.BodyHandlers.ofString());
    // Parse response.body() to get nextId and nextSort for subsequent calls
    System.out.println(response.body());
}</code></pre>
          </div>
        </div>

        <div class="doc-block">
          <h3>ì‘ë‹µ ì˜ˆì‹œ</h3>
          <pre class="glass"><code>{
  "items": [
    {
      "requestId": "req_20260201_002",
      "userId": "user_123",
      "status": "DONE",
      "resultUrl": "https://s3.amazonaws.com/...",
      "createdAt": "2026-02-01T07:20:00Z"
    },
    {
      "requestId": "req_20260201_001",
      "userId": "user_123",
      "status": "DONE",
      "resultUrl": "https://s3.amazonaws.com/...",
      "createdAt": "2026-02-01T07:15:20Z"
    }
  ],
  "nextId": "req_20260201_001",
  "nextSort": "2026-02-01T07:15:20Z"
}</code></pre>
        </div>
      </section>
    </div>

    <!-- Toast Notification -->
    <Transition name="toast">
      <div v-if="showToast" class="toast glass">
        í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨
      </div>
    </Transition>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, nextTick, watch } from 'vue'
import hljs from 'highlight.js'
import 'highlight.js/styles/github.css'

const activeSection = ref('upload')
const sections = ['upload', 'result', 'history']

const expandedBlocks = ref({
  upload: true,
  polling: true,
  history: true
})

const selectedLangs = ref({
  upload: 'js',
  polling: 'js',
  history: 'js'
})

const showToast = ref(false)
let toastTimeout = null

const highlightAll = () => {
  nextTick(() => {
    const blocks = document.querySelectorAll('pre code')
    blocks.forEach((block) => {
      hljs.highlightElement(block)
    })
  })
}

// Watch for changes in expanded blocks or language selection to re-highlight
watch([expandedBlocks, selectedLangs], () => {
  highlightAll()
}, { deep: true })

const toggleBlock = (blockId) => {
  expandedBlocks.value[blockId] = !expandedBlocks.value[blockId]
  if (expandedBlocks.value[blockId]) {
    highlightAll()
  }
}

const copyCode = (id) => {
  const el = document.getElementById(id)
  if (el) {
    const code = el.innerText
    navigator.clipboard.writeText(code).then(() => {
      showToast.value = true
      if (toastTimeout) clearTimeout(toastTimeout)
      toastTimeout = setTimeout(() => {
        showToast.value = false
      }, 2000)
    })
  }
}

const scrollTo = (id) => {
  const element = document.getElementById(id)
  if (element) {
    const yOffset = -120 // Adjust for fixed navbar
    const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset
    window.scrollTo({ top: y, behavior: 'smooth' })
    activeSection.value = id
    // Update URL without jump
    history.replaceState(null, null, `#${id}`)
  }
}

const handleScroll = () => {
  const scrollPosition = window.scrollY + 150
  for (const section of sections) {
    const element = document.getElementById(section)
    if (element) {
      const top = element.offsetTop
      const height = element.offsetHeight
      if (scrollPosition >= top && scrollPosition < top + height) {
        activeSection.value = section
        break
      }
    }
  }
}

onMounted(() => {
  window.addEventListener('scroll', handleScroll)
  // Check hash on load
  const hash = window.location.hash.replace('#', '')
  if (sections.includes(hash)) {
    setTimeout(() => scrollTo(hash), 100)
  }
  highlightAll()
})

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll)
})
</script>

<style scoped>
.docs-layout {
  display: flex;
  gap: 4rem;
  position: relative;
  max-width: 1200px;
  margin: 0 auto;
}

/* Sidebar Styling */
.sidebar {
  width: 260px;
  flex-shrink: 0;
}

.sidebar-sticky {
  position: sticky;
  top: 8rem;
}

.sidebar-title {
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-muted);
  margin-bottom: 1.5rem;
  padding-left: 1rem;
}

.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.sidebar-nav a {
  padding: 0.8rem 1rem;
  border-radius: 12px;
  font-size: 0.95rem;
  color: var(--text-muted);
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.8rem;
  border: 1px solid transparent;
}

.sidebar-nav a:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-main);
}

.sidebar-nav a.active {
  background: var(--surface-color);
  border-color: var(--border-color);
  color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.method {
  font-size: 0.75rem;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
}

.method.post { background: rgba(16, 185, 129, 0.1); color: #10b981; }
.method.get { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }

/* Content Styling */
.docs-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4rem;
}

.doc-section {
  display: flex;
  flex-direction: column;
  gap: 2.5rem;
}

.header-group h2 {
  font-size: 3rem;
  margin-bottom: 0.8rem;
}

.header-group p {
  color: var(--text-muted);
  font-size: 1.2rem;
}

.doc-block h3 {
  margin-bottom: 1.5rem;
  color: var(--secondary-color);
  font-size: 1.25rem;
}

.doc-block p {
  color: var(--text-muted);
  line-height: 1.8;
}

.doc-block.glass {
  padding: 2rem;
}

.divider {
  height: 1px;
  background: linear-gradient(90deg, var(--border-color), transparent);
}

table {
  width: 100%;
  border-collapse: collapse;
  overflow: hidden;
}

th {
  text-align: left;
  padding: 1.2rem;
  background: rgba(255, 255, 255, 0.03);
  color: var(--primary-color);
  font-size: 0.85rem;
  text-transform: uppercase;
}

td {
  padding: 1.2rem;
  border-top: 1px solid var(--border-color);
  font-size: 0.95rem;
}

pre {
  padding: 1.5rem;
  overflow-x: auto;
  color: #24292e; /* Darker color for light background */
  background: #f8f9fa; /* Off-white gray background */
  border-radius: 12px;
  font-family: 'Fira Code', monospace;
  line-height: 1.5;
  font-size: 0.9rem;
  border: 1px solid var(--border-color);
}

code {
  color: var(--primary-color);
  background: rgba(0, 0, 0, 0.05); /* Subtle gray instead of blue */
  padding: 2px 4px;
  border-radius: 4px;
}

.code-wrapper {
  position: relative;
  overflow: hidden;
  padding: 0;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  margin-top: 1rem;
}

.code-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.05);
  border-bottom: 1px solid var(--border-color);
}

.lang-tag {
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--text-muted);
  text-transform: uppercase;
}

.copy-btn {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-muted);
  font-size: 0.7rem;
  padding: 0.2rem 0.6rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.copy-btn:hover {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.code-wrapper pre {
  margin: 0;
  border: none;
  background: #f8f9fa; /* Consistent off-white gray */
  border-radius: 0;
}

.code-wrapper pre code.hljs {
  padding: 1.5rem;
  background: transparent;
}

/* Dark mode overrides for code blocks if needed */
:root[data-theme="dark"] .code-wrapper pre,
:root[data-theme="dark"] pre.glass,
:root[data-theme="dark"] .hljs {
  background: rgba(0, 0, 0, 0.3) !important;
  color: #a5d6ff !important;
}

/* Highlight.js specific adjustments */
.hljs {
  background: transparent !important;
}

@media (max-width: 1024px) {
  .docs-layout {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
    position: sticky;
    top: 6rem;
    z-index: 10;
    background: var(--bg-color);
    padding: 1rem 0;
  }
  .sidebar-sticky {
    top: 0;
  }
  .sidebar-nav {
    flex-direction: row;
    overflow-x: auto;
    padding-bottom: 0.5rem;
  }
  .sidebar-nav a {
    white-space: nowrap;
  }
  .sidebar-title {
    display: none;
  }
}

/* Security Notice */
.security-notice {
  display: flex;
  gap: 1.5rem;
  padding: 1.5rem 2rem;
  border-left: 4px solid #f59e0b;
  background: rgba(245, 158, 11, 0.05);
  align-items: center;
}

.notice-icon {
  font-size: 2rem;
}

.notice-text p {
  margin: 0;
  font-size: 0.95rem;
  color: var(--text-main);
  line-height: 1.6;
}

.notice-text p strong {
  color: #f59e0b;
}

/* Collapsible Code */
.code-wrapper {
  transition: all 0.3s ease;
}

.code-wrapper.collapsed pre {
  display: none;
}

.code-header {
  cursor: pointer;
}

.code-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.toggle-icon {
  font-size: 0.8rem;
  color: var(--text-muted);
  width: 20px;
  text-align: center;
}

.lang-tag small {
  font-weight: 400;
  opacity: 0.7;
  margin-left: 0.5rem;
  text-transform: none;
}

/* Toast Notification */
.toast {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  padding: 0.8rem 1.5rem;
  background: var(--surface-color);
  border: 1px solid var(--primary-color);
  color: var(--primary-color);
  border-radius: 50px;
  font-size: 0.9rem;
  font-weight: 600;
  z-index: 1000;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(10px);
}

.toast-enter-active,
.toast-leave-active {
  transition: all 0.3s ease;
}

.toast-enter-from,
.toast-leave-to {
  opacity: 0;
  transform: translate(-50%, 20px);
}

.lang-tabs {
  display: flex;
  gap: 0.8rem;
}

.lang-tabs button {
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-muted);
  font-size: 0.85rem;
  font-weight: 700;
  padding: 0.5rem 1.2rem;
  border-radius: 8px;
  cursor: pointer;
  text-transform: uppercase;
  transition: all 0.2s;
  min-width: 100px;
}

.lang-tabs button:hover {
  color: var(--text-main);
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

.lang-tabs button.active {
  color: var(--primary-color);
  background: rgba(56, 189, 248, 0.1);
  border-color: var(--primary-color);
}

.info-alert {
  display: flex;
  gap: 1.2rem;
  padding: 1.5rem;
  background: rgba(56, 189, 248, 0.05);
  border-left: 4px solid var(--primary-color);
  margin-top: 1.5rem;
  align-items: flex-start;
}

.info-icon {
  font-size: 1.5rem;
  line-height: 1;
}

.info-alert p {
  margin: 0;
  font-size: 0.95rem;
  color: var(--text-main);
  line-height: 1.6;
}

.info-alert strong {
  color: var(--primary-color);
}
</style>
